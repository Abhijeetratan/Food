{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useDispatchCart,useCart}from'./ContextReducer';// import { Dropdown, DropdownButton } from 'react-bootstrap';\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Card(props){let data=useCart();let navigate=useNavigate();const[qty,setQty]=useState(1);const[size,setSize]=useState(\"\");const priceRef=useRef();// const [btnEnable, setBtnEnable] = useState(false);\n// let totval = 0\n// let price = Object.values(options).map((value) => {\n//   return parseInt(value, 10);\n// });\nlet options=props.options;let priceOptions=Object.keys(options);let foodItem=props.item;const dispatch=useDispatchCart();const handleClick=()=>{if(!localStorage.getItem(\"token\")){navigate(\"/login\");}};const handleQty=e=>{setQty(e.target.value);};const handleOptions=e=>{setSize(e.target.value);};const handleAddToCart=async()=>{let food=[];for(const item of data){if(item.id===foodItem._id){food=item;break;}}console.log(food);console.log(new Date());if(food!==[]){if(food.size===size){await dispatch({type:\"UPDATE\",id:foodItem._id,price:finalPrice,qty:qty});return;}else if(food.size!==size){await dispatch({type:\"ADD\",id:foodItem._id,name:foodItem.name,price:finalPrice,qty:qty,size:size,img:props.ImgSrc});console.log(\"Size different so simply ADD one more to the list\");return;}return;}await dispatch({type:\"ADD\",id:foodItem._id,name:foodItem.name,price:finalPrice,qty:qty,size:size});// setBtnEnable(true)\n};useEffect(()=>{setSize(priceRef.current.value);},[]);// useEffect(()=>{\n// checkBtn();\n//   },[data])\nlet finalPrice=qty*parseInt(options[size]);//This is where Price is changing\n// totval += finalPrice;\n// console.log(totval)\nreturn/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card mt-3\",style:{width:\"16rem\",maxHeight:\"360px\"},children:[/*#__PURE__*/_jsx(\"img\",{src:props.ImgSrc,className:\"card-img-top\",alt:\"...\",style:{height:\"120px\",objectFit:\"fill\"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:props.foodName}),/*#__PURE__*/_jsxs(\"div\",{className:\"container w-100 p-0\",style:{height:\"38px\"},children:[/*#__PURE__*/_jsx(\"select\",{className:\"m-2 h-100 w-20 bg-success text-black rounded\",style:{select:\"#FF0000\"},onClick:handleClick,onChange:handleQty,children:Array.from(Array(6),(e,i)=>{return/*#__PURE__*/_jsx(\"option\",{value:i+1,children:i+1},i+1);})}),/*#__PURE__*/_jsx(\"select\",{className:\"m-2 h-100 w-20 bg-success text-black rounded\",style:{select:\"#FF0000\"},ref:priceRef,onClick:handleClick,onChange:handleOptions,children:priceOptions.map(i=>{return/*#__PURE__*/_jsx(\"option\",{value:i,children:i},i);})}),/*#__PURE__*/_jsxs(\"div\",{className:\" d-inline ms-2 h-100 w-20 fs-5\",children:[\"\\u20B9\",finalPrice,\"/-\"]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success justify-center ms-2 \",onClick:handleAddToCart,children:\"Add to Cart\"})]})]})});}//","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","useDispatchCart","useCart","jsx","_jsx","jsxs","_jsxs","Card","props","data","navigate","qty","setQty","size","setSize","priceRef","options","priceOptions","Object","keys","foodItem","item","dispatch","handleClick","localStorage","getItem","handleQty","e","target","value","handleOptions","handleAddToCart","food","id","_id","console","log","Date","type","price","finalPrice","name","img","ImgSrc","current","parseInt","children","className","style","width","maxHeight","src","alt","height","objectFit","foodName","select","onClick","onChange","Array","from","i","ref","map"],"sources":["C:/MERN/New folder/Food/Gofood-main/backend/client/src/components/Card.js"],"sourcesContent":["\r\nimport React, { useState, useRef, useEffect } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { useDispatchCart, useCart } from './ContextReducer'\r\n// import { Dropdown, DropdownButton } from 'react-bootstrap';\r\nexport default function Card(props) {\r\n  let data = useCart();\r\n\r\n  let navigate = useNavigate()\r\n  const [qty, setQty] = useState(1)\r\n  const [size, setSize] = useState(\"\")\r\n  const priceRef = useRef();\r\n  // const [btnEnable, setBtnEnable] = useState(false);\r\n  // let totval = 0\r\n  // let price = Object.values(options).map((value) => {\r\n  //   return parseInt(value, 10);\r\n  // });\r\n  let options = props.options;\r\n  let priceOptions = Object.keys(options);\r\n  let foodItem = props.item;\r\n  const dispatch = useDispatchCart();\r\n  const handleClick = () => {\r\n    if (!localStorage.getItem(\"token\")) {\r\n      navigate(\"/login\")\r\n    }\r\n  }\r\n  const handleQty = (e) => {\r\n    setQty(e.target.value);\r\n  }\r\n  const handleOptions = (e) => {\r\n    setSize(e.target.value);\r\n  }\r\n  const handleAddToCart = async () => {\r\n    let food = []\r\n    for (const item of data) {\r\n      if (item.id === foodItem._id) {\r\n        food = item;\r\n\r\n        break;\r\n      }\r\n    }\r\n    console.log(food)\r\n    console.log(new Date())\r\n    if (food !== []) {\r\n      if (food.size === size) {\r\n        await dispatch({ type: \"UPDATE\", id: foodItem._id, price: finalPrice, qty: qty })\r\n        return\r\n      }\r\n      else if (food.size !== size) {\r\n        await dispatch({ type: \"ADD\", id: foodItem._id, name: foodItem.name, price: finalPrice, qty: qty, size: size,img: props.ImgSrc })\r\n        console.log(\"Size different so simply ADD one more to the list\")\r\n        return\r\n      }\r\n      return\r\n    }\r\n\r\n    await dispatch({ type: \"ADD\", id: foodItem._id, name: foodItem.name, price: finalPrice, qty: qty, size: size })\r\n\r\n\r\n    // setBtnEnable(true)\r\n\r\n  }\r\n\r\n  useEffect(() => {\r\n    setSize(priceRef.current.value)\r\n  }, [])\r\n\r\n  // useEffect(()=>{\r\n  // checkBtn();\r\n  //   },[data])\r\n\r\n  let finalPrice = qty * parseInt(options[size]);   //This is where Price is changing\r\n  // totval += finalPrice;\r\n  // console.log(totval)\r\n  return (\r\n    <div>\r\n\r\n      <div className=\"card mt-3\" style={{ width: \"16rem\", maxHeight: \"360px\" }}>\r\n        <img src={props.ImgSrc} className=\"card-img-top\" alt=\"...\" style={{ height: \"120px\", objectFit: \"fill\" }} />\r\n        <div className=\"card-body\">\r\n          <h5 className=\"card-title\">{props.foodName}</h5>\r\n          {/* <p className=\"card-text\">This is some random text. This is description.</p> */}\r\n          <div className='container w-100 p-0' style={{ height: \"38px\" }}>\r\n            <select className=\"m-2 h-100 w-20 bg-success text-black rounded\" style={{ select: \"#FF0000\" }} onClick={handleClick} onChange={handleQty}>\r\n              {Array.from(Array(6), (e, i) => {\r\n                return (\r\n                  <option key={i + 1} value={i + 1}>{i + 1}</option>)\r\n              })}\r\n            </select>\r\n            <select className=\"m-2 h-100 w-20 bg-success text-black rounded\" style={{ select: \"#FF0000\" }} ref={priceRef} onClick={handleClick} onChange={handleOptions}>\r\n              {priceOptions.map((i) => {\r\n                return <option key={i} value={i}>{i}</option>\r\n              })}\r\n            </select>\r\n            <div className=' d-inline ms-2 h-100 w-20 fs-5' >\r\n              â‚¹{finalPrice}/-\r\n            </div>\r\n          </div>\r\n          <hr></hr>\r\n          <button className={`btn btn-success justify-center ms-2 `} onClick={handleAddToCart}>Add to Cart</button>\r\n          {/* <button className={`btn btn-danger justify-center ms-2 ${btnEnable ? \"\" : \"disabled\"}`} onClick={handleRemoveCart}>Remove</button> */}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n//"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}